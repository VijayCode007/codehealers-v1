<!-- views/multiStepForm.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> </head>

  <title>Register</title>
</head>
<body>

<form id="form1">
  <h2>Form 1</h2>
  <input type="text" name="username" placeholder="Username" value="NA" required>
  <input type="text" name="password" placeholder="password" value="NA" required>
  <input type="text" name="fullname" placeholder="fullname" value="NA" required>
  <input type="number" name="mobile" placeholder="mobile" value="123" required>
  <input type="email" name="email" placeholder="Email" value="NA@na.com" required>
  <button type="button" id="continue">Continue</button>
</form>

<form id="form2" style="display: none;">
  <h2>Form 2</h2>
  <input type="number" name="age" placeholder="age" value="23" required>
  <label for="gender">Gender:</label>
  <select id="gender" name="gender" required>
    <option value="" disabled selected>Select your gender</option>
    <option value="male">Male</option>
    <option value="female">Female</option>
    <option value="other">Other</option>
  </select>  <input type="number" name="height" placeholder="height(cm)" value="155" required>
  <input type="number" name="weight" placeholder="weight(KG)" value="50" required>
  <input type="text" name="bg" placeholder="Blood Group" value="A+" required>
  <input type="text" name="sp" placeholder="Special problem?" value="NA" required>
  <button type="submit">Submit</button>

</form>

<script>
$(document).ready(function() {
      $('#continue').click(function() {
        $('#form2').show();
        $('#form1').hide();
      });

      $('#form2').submit(function(event) {
        event.preventDefault();
        const combinedData = $('#form1').serializeArray().concat($('#form2').serializeArray());

        $.ajax({
          url: '/register', 
          type: 'POST',
          data: combinedData, 
          success: function(response) {
            console.log('User created:', response);
            window.location.href = '/profile';
          },
          error: function(error) {
            console.error('Error creating user:', error);
          }
        });
      });
    });
</script>

</body>
</html>
